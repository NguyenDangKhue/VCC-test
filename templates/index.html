{% extends "base.html" %}
{% block title %}Trang chủ - Viettel Construction Lâm Đồng{% endblock %}
{% block content %}

<section class="hero-section text-center text-white d-flex align-items-center">
  {% if hero_images and hero_images|length > 0 %}
  <div class="hero-carousel">
    {% for hero in hero_images %}
    <div class="hero-slide {% if loop.index0 == 0 %}active{% endif %}" 
         style="background-image: url('{{ hero.image_url }}');"
         data-project-id="{{ hero.project_id }}">
      {% if hero.caption %}
      <div class="hero-caption {% if loop.index0 == 0 %}active{% endif %}">
        {{ hero.caption }}
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  {% endif %}
  <div class="hero-red-overlay"></div>
  <div class="container hero-content">
    <h1 class="display-5 fw-bold">Kiến tạo hạ tầng số, bền vững tương lai</h1>
    <p class="lead mt-3 mb-4">Viettel Construction - Chi nhánh Lâm Đồng cung cấp giải pháp hạ tầng viễn thông, năng lượng xanh và toà nhà thông minh.</p>
    <div>
      <a href="{{ url_for('products') }}" class="btn btn-light btn-lg me-2">Khám phá sản phẩm</a>
      <a href="{{ url_for('gallery') }}" class="btn btn-outline-light btn-lg">Xem hình ảnh</a>
    </div>
  </div>
  <div class="hero-overlay"></div>
  <div class="hero-gradient"></div>
  {% if hero_images and hero_images|length > 1 %}
  <div class="hero-indicators">
    {% for hero in hero_images %}
    <button class="hero-indicator {% if loop.index0 == 0 %}active{% endif %}" 
            data-slide="{{ loop.index0 }}"
            aria-label="Slide {{ loop.index }}"></button>
    {% endfor %}
  </div>
  {% endif %}
</section>

{% if hero_images and hero_images|length > 0 %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const slides = document.querySelectorAll('.hero-slide');
  const indicators = document.querySelectorAll('.hero-indicator');
  if (slides.length === 0) return;
  
  let currentSlide = 0;
  const slideInterval = 5000; // 5 seconds

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === index);
      // Show/hide caption
      const caption = slide.querySelector('.hero-caption');
      if (caption) {
        caption.classList.toggle('active', i === index);
      }
    });
    indicators.forEach((indicator, i) => {
      indicator.classList.toggle('active', i === index);
    });
    currentSlide = index;
  }

  function nextSlide() {
    const next = (currentSlide + 1) % slides.length;
    showSlide(next);
  }

  // Auto-advance slides
  let slideTimer = setInterval(nextSlide, slideInterval);

  // Indicator clicks
  indicators.forEach((indicator, index) => {
    indicator.addEventListener('click', (e) => {
      e.stopPropagation();
      clearInterval(slideTimer);
      showSlide(index);
      slideTimer = setInterval(nextSlide, slideInterval);
    });
  });

  // Click on hero to go to project
  const heroSection = document.querySelector('.hero-section');
  if (heroSection) {
    heroSection.addEventListener('click', function(e) {
      if (!e.target.closest('.hero-indicators') && !e.target.closest('.hero-content')) {
        const activeSlide = document.querySelector('.hero-slide.active');
        if (activeSlide) {
          const projectId = activeSlide.getAttribute('data-project-id');
          if (projectId) {
            window.location.href = '{{ url_for("gallery") }}?project=' + projectId;
          }
        }
      }
    });

    // Pause on hover
    heroSection.addEventListener('mouseenter', () => {
      clearInterval(slideTimer);
    });
    heroSection.addEventListener('mouseleave', () => {
      slideTimer = setInterval(nextSlide, slideInterval);
    });
  }
});
</script>
{% endif %}

<section class="features py-5">
  <div class="container">
    <div class="row g-4">
      <div class="col-md-4">
        <div class="feature-card card h-100">
          <div class="card-body">
            <h5 class="card-title">Hạ tầng viễn thông</h5>
            <p class="card-text">Thi công, vận hành và bảo trì hệ thống mạng viễn thông với tiêu chuẩn chất lượng cao.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card card h-100">
          <div class="card-body">
            <h5 class="card-title">Năng lượng xanh</h5>
            <p class="card-text">Giải pháp điện mặt trời tối ưu chi phí, thân thiện với môi trường cho doanh nghiệp và hộ gia đình.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card card h-100">
          <div class="card-body">
            <h5 class="card-title">Tòa nhà thông minh</h5>
            <p class="card-text">Hệ thống IoT, an ninh, M&E tích hợp, nâng cao trải nghiệm và tối ưu vận hành.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  </section>

{% endblock %}


